<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImagePro - Professional Online Image Editor</title>
    <meta name="description" content="Professional online image editor with filters, adjustments, batch processing. Supports JPG, PNG, WebP, GIF, HEIC, TIFF.">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Language Selector -->
    <div class="lang-selector">
        <button class="lang-btn" onclick="toggleLang()">
            <span id="current-flag">üá∫üá∏</span> <span id="current-lang">English</span> <i class="fas fa-chevron-down"></i>
        </button>
        <div class="lang-dropdown" id="langDropdown">
            <div class="lang-option" onclick="setLang('en')">üá∫üá∏ English</div>
            <div class="lang-option" onclick="setLang('zh')">üá®üá≥ ‰∏≠Êñá</div>
            <div class="lang-option" onclick="setLang('es')">üá™üá∏ Espa√±ol</div>
            <div class="lang-option" onclick="setLang('ja')">üáØüáµ Êó•Êú¨Ë™û</div>
            <div class="lang-option" onclick="setLang('ko')">üá∞üá∑ ÌïúÍµ≠Ïñ¥</div>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- Left Sidebar - Tools -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-layer-group"></i>
                    <span data-i18n="appName">ImagePro</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-title" data-i18n="upload">üì§ Upload</div>
                    <button class="nav-item active" onclick="switchTab('upload')" data-tab="upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span data-i18n="uploadImages">Upload Images</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('batch')" data-tab="batch">
                        <i class="fas fa-images"></i>
                        <span data-i18n="batchProcess">Batch Process</span>
                    </button>
                </div>

                <div class="nav-section" id="editSection" style="display:none">
                    <div class="nav-title" data-i18n="edit">‚úèÔ∏è Edit</div>
                    <button class="nav-item" onclick="switchTab('adjust')" data-tab="adjust">
                        <i class="fas fa-sliders-h"></i>
                        <span data-i18n="adjustments">Adjustments</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('filters')" data-tab="filters">
                        <i class="fas fa-magic"></i>
                        <span data-i18n="filters">Filters</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('transform')" data-tab="transform">
                        <i class="fas fa-crop-alt"></i>
                        <span data-i18n="transform">Transform</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('compress')" data-tab="compress">
                        <i class="fas fa-compress-arrows-alt"></i>
                        <span data-i18n="compress">Compress</span>
                    </button>
                </div>

                <div class="nav-section">
                    <div class="nav-title" data-i18n="export">üíæ Export</div>
                    <button class="nav-item" onclick="switchTab('export')" data-tab="export">
                        <i class="fas fa-download"></i>
                        <span data-i18n="download">Download</span>
                    </button>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="stats" id="imageStats" style="display:none">
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="dimensions">Size:</span>
                        <span class="stat-value" id="statDimensions">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="fileSize">File:</span>
                        <span class="stat-value" id="statFileSize">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-i18n="format">Format:</span>
                        <span class="stat-value" id="statFormat">-</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="btn-icon" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" data-i18n="editorTitle">Image Editor</h1>
                </div>
                <div class="top-bar-right">
                    <button class="btn btn-secondary" onclick="resetAll()" id="btnReset" style="display:none">
                        <i class="fas fa-undo"></i> <span data-i18n="reset">Reset</span>
                    </button>
                    <button class="btn btn-primary" onclick="downloadImage()" id="btnDownload" style="display:none">
                        <i class="fas fa-download"></i> <span data-i18n="download">Download</span>
                    </button>
                </div>
            </header>

            <!-- Workspace -->
            <div class="workspace">
                <!-- Upload Tab -->
                <div class="tab-content active" id="tab-upload">
                    <div class="upload-zone" id="dropZone">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <h3 data-i18n="dropTitle">Drop your images here</h3>
                            <p data-i18n="dropSubtitle">or click to browse</p>
                            <p class="upload-formats" data-i18n="supportedFormats">
                                Supports: JPG, PNG, WebP, GIF, HEIC, TIFF (Max 50MB)
                            </p>
                            <input type="file" id="fileInput" accept="image/*,.heic,.heif,.tiff,.tif" multiple style="display:none">
                        </div>
                    </div>
                    
                    <div class="recent-files" id="recentFiles" style="display:none">
                        <h4 data-i18n="recentFiles">Recent Files</h4>
                        <div class="file-list" id="fileList"></div>
                    </div>
                </div>

                <!-- Batch Processing Tab -->
                <div class="tab-content" id="tab-batch">
                    <div class="batch-container">
                        <div class="batch-header">
                            <h3 data-i18n="batchTitle">Batch Processing</h3>
                            <div class="batch-actions">
                                <button class="btn btn-secondary" onclick="addMoreFiles()">
                                    <i class="fas fa-plus"></i> <span data-i18n="addFiles">Add Files</span>
                                </button>
                                <button class="btn btn-danger" onclick="clearBatch()">
                                    <i class="fas fa-trash"></i> <span data-i18n="clearAll">Clear All</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="batch-settings">
                            <div class="setting-group">
                                <label data-i18n="batchFormat">Output Format</label>
                                <select id="batchFormat" class="input-field">
                                    <option value="original">Keep Original</option>
                                    <option value="image/jpeg">JPEG</option>
                                    <option value="image/png">PNG</option>
                                    <option value="image/webp">WebP</option>
                                </select>
                            </div>
                            <div class="setting-group">
                                <label data-i18n="batchQuality">Quality</label>
                                <div class="slider-with-value">
                                    <input type="range" id="batchQuality" min="1" max="100" value="85" class="slider">
                                    <span class="slider-value">85%</span>
                                </div>
                            </div>
                            <div class="setting-group">
                                <label data-i18n="batchResize">Resize</label>
                                <div class="resize-inputs">
                                    <input type="number" id="batchWidth" placeholder="Width" class="input-field">
                                    <span>√ó</span>
                                    <input type="number" id="batchHeight" placeholder="Height" class="input-field">
                                    <label class="checkbox">
                                        <input type="checkbox" id="batchMaintainRatio" checked>
                                        <span data-i18n="maintainRatio">Keep ratio</span>
                                    </label>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-full" onclick="processBatch()">
                                <i class="fas fa-cogs"></i> <span data-i18n="processAll">Process All</span>
                            </button>
                        </div>

                        <div class="batch-files" id="batchFilesList">
                            <p class="empty-state" data-i18n="noBatchFiles">No files added yet</p>
                        </div>
                    </div>
                </div>

                <!-- Adjustments Tab -->
                <div class="tab-content" id="tab-adjust">
                    <div class="adjustments-panel">
                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-sun"></i>
                                <span data-i18n="brightness">Brightness</span>
                                <span class="adjustment-value" id="brightnessValue">100%</span>
                            </div>
                            <input type="range" id="brightness" min="0" max="200" value="100" class="slider slider-purple">
                        </div>

                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-adjust"></i>
                                <span data-i18n="contrast">Contrast</span>
                                <span class="adjustment-value" id="contrastValue">100%</span>
                            </div>
                            <input type="range" id="contrast" min="0" max="200" value="100" class="slider slider-purple">
                        </div>

                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-tint"></i>
                                <span data-i18n="saturation">Saturation</span>
                                <span class="adjustment-value" id="saturationValue">100%</span>
                            </div>
                            <input type="range" id="saturation" min="0" max="200" value="100" class="slider slider-purple">
                        </div>

                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-eye-dropper"></i>
                                <span data-i18n="hue">Hue Rotate</span>
                                <span class="adjustment-value" id="hueValue">0¬∞</span>
                            </div>
                            <input type="range" id="hue" min="0" max="360" value="0" class="slider slider-purple">
                        </div>

                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-circle-half-stroke"></i>
                                <span data-i18n="blur">Blur</span>
                                <span class="adjustment-value" id="blurValue">0px</span>
                            </div>
                            <input type="range" id="blur" min="0" max="20" value="0" class="slider slider-purple">
                        </div>

                        <div class="adjustment-group">
                            <div class="adjustment-header">
                                <i class="fas fa-eye"></i>
                                <span data-i18n="opacity">Opacity</span>
                                <span class="adjustment-value" id="opacityValue">100%</span>
                            </div>
                            <input type="range" id="opacity" min="0" max="100" value="100" class="slider slider-purple">
                        </div>

                        <div class="adjustment-actions">
                            <button class="btn btn-secondary" onclick="resetAdjustments()">
                                <i class="fas fa-undo"></i> <span data-i18n="resetAdjustments">Reset All</span>
                            </button>
                            <button class="btn btn-primary" onclick="applyAdjustments()">
                                <i class="fas fa-check"></i> <span data-i18n="apply">Apply</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Filters Tab -->
                <div class="tab-content" id="tab-filters">
                    <div class="filters-panel">
                        <div class="filter-category">
                            <h4 data-i18n="popularFilters">Popular Filters</h4>
                            <div class="filter-grid">
                                <button class="filter-btn" data-filter="none">
                                    <div class="filter-preview" style="filter:none"></div>
                                    <span data-i18n="original">Original</span>
                                </button>
                                <button class="filter-btn" data-filter="grayscale">
                                    <div class="filter-preview" style="filter:grayscale(100%)"></div>
                                    <span data-i18n="grayscale">Grayscale</span>
                                </button>
                                <button class="filter-btn" data-filter="sepia">
                                    <div class="filter-preview" style="filter:sepia(100%)"></div>
                                    <span data-i18n="sepia">Sepia</span>
                                </button>
                                <button class="filter-btn" data-filter="vintage">
                                    <div class="filter-preview" style="filter:sepia(50%) contrast(120%) saturate(80%)"></div>
                                    <span data-i18n="vintage">Vintage</span>
                                </button>
                                <button class="filter-btn" data-filter="warm">
                                    <div class="filter-preview" style="filter:sepia(30%) saturate(140%) hue-rotate(-10deg)"></div>
                                    <span data-i18n="warm">Warm</span>
                                </button>
                                <button class="filter-btn" data-filter="cool">
                                    <div class="filter-preview" style="filter:saturate(120%) hue-rotate(10deg) brightness(105%)"></div>
                                    <span data-i18n="cool">Cool</span>
                                </button>
                                <button class="filter-btn" data-filter="dramatic">
                                    <div class="filter-preview" style="filter:contrast(150%) saturate(120%)"></div>
                                    <span data-i18n="dramatic">Dramatic</span>
                                </button>
                                <button class="filter-btn" data-filter="vivid">
                                    <div class="filter-preview" style="filter:saturate(180%) contrast(110%)"></div>
                                    <span data-i18n="vivid">Vivid</span>
                                </button>
                            </div>
                        </div>

                        <div class="filter-category">
                            <h4 data-i18n="artisticFilters">Artistic</h4>
                            <div class="filter-grid">
                                <button class="filter-btn" data-filter="invert">
                                    <div class="filter-preview" style="filter:invert(100%)"></div>
                                    <span data-i18n="invert">Invert</span>
                                </button>
                                <button class="filter-btn" data-filter="duotone">
                                    <div class="filter-preview" style="filter:grayscale(100%) sepia(100%) hue-rotate(220deg) saturate(300%)"></div>
                                    <span data-i18n="duotone">Duotone</span>
                                </button>
                                <button class="filter-btn" data-filter="noir">
                                    <div class="filter-preview" style="filter:grayscale(100%) contrast(150%) brightness(90%)"></div>
                                    <span data-i18n="noir">Noir</span>
                                </button>
                                <button class="filter-btn" data-filter="cyber">
                                    <div class="filter-preview" style="filter:hue-rotate(180deg) saturate(200%) contrast(120%)"></div>
                                    <span data-i18n="cyber">Cyber</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transform Tab -->
                <div class="tab-content" id="tab-transform">
                    <div class="transform-panel">
                        <div class="transform-section">
                            <h4 data-i18n="rotate">Rotate</h4>
                            <div class="transform-buttons">
                                <button class="btn btn-secondary" onclick="rotateImage(-90)">
                                    <i class="fas fa-undo"></i> -90¬∞
                                </button>
                                <button class="btn btn-secondary" onclick="rotateImage(90)">
                                    <i class="fas fa-redo"></i> +90¬∞
                                </button>
                                <button class="btn btn-secondary" onclick="rotateImage(180)">
                                    <i class="fas fa-sync-alt"></i> 180¬∞
                                </button>
                                <button class="btn btn-secondary" onclick="flipImage('horizontal')">
                                    <i class="fas fa-arrows-alt-h"></i> <span data-i18n="flipH">Flip H</span>
                                </button>
                                <button class="btn btn-secondary" onclick="flipImage('vertical')">
                                    <i class="fas fa-arrows-alt-v"></i> <span data-i18n="flipV">Flip V</span>
                                </button>
                            </div>
                            <div class="slider-control">
                                <label data-i18n="customRotate">Custom Rotate</label>
                                <input type="range" id="rotateSlider" min="-180" max="180" value="0" class="slider slider-purple">
                                <span class="slider-value" id="rotateValue">0¬∞</span>
                            </div>
                        </div>

                        <div class="transform-section">
                            <h4 data-i18n="crop">Crop</h4>
                            <div class="crop-presets">
                                <button class="crop-preset" data-ratio="free">
                                    <i class="fas fa-crop"></i>
                                    <span data-i18n="free">Free</span>
                                </button>
                                <button class="crop-preset" data-ratio="1:1">
                                    <div class="crop-icon square"></div>
                                    <span>1:1</span>
                                </button>
                                <button class="crop-preset" data-ratio="4:3">
                                    <div class="crop-icon four-three"></div>
                                    <span>4:3</span>
                                </button>
                                <button class="crop-preset" data-ratio="16:9">
                                    <div class="crop-icon sixteen-nine"></div>
                                    <span>16:9</span>
                                </button>
                                <button class="crop-preset" data-ratio="3:4">
                                    <div class="crop-icon three-four"></div>
                                    <span>3:4</span>
                                </button>
                                <button class="crop-preset" data-ratio="9:16">
                                    <div class="crop-icon nine-sixteen"></div>
                                    <span>9:16</span>
                                </button>
                            </div>
                            <div class="crop-dimensions">
                                <div class="input-group">
                                    <label data-i18n="width">Width</label>
                                    <input type="number" id="cropWidth" class="input-field" placeholder="px">
                                </div>
                                <div class="input-group">
                                    <label data-i18n="height">Height</label>
                                    <input type="number" id="cropHeight" class="input-field" placeholder="px">
                                </div>
                            </div>
                            <button class="btn btn-primary btn-full" onclick="applyCrop()">
                                <i class="fas fa-check"></i> <span data-i18n="applyCrop">Apply Crop</span>
                            </button>
                        </div>

                        <div class="transform-section">
                            <h4 data-i18n="resize">Resize</h4>
                            <div class="resize-options">
                                <div class="input-group">
                                    <label data-i18n="newWidth">New Width</label>
                                    <input type="number" id="resizeWidth" class="input-field" placeholder="px">
                                </div>
                                <div class="input-group">
                                    <label data-i18n="newHeight">New Height</label>
                                    <input type="number" id="resizeHeight" class="input-field" placeholder="px">
                                </div>
                                <label class="checkbox">
                                    <input type="checkbox" id="maintainAspect" checked>
                                    <span data-i18n="maintainAspect">Maintain aspect ratio</span>
                                </label>
                            </div>
                            <button class="btn btn-primary btn-full" onclick="applyResize()">
                                <i class="fas fa-expand"></i> <span data-i18n="applyResize">Apply Resize</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Compress Tab -->
                <div class="tab-content" id="tab-compress">
                    <div class="compress-panel">
                        <div class="compress-preview">
                            <div class="compress-original">
                                <h4 data-i18n="original">Original</h4>
                                <div class="compress-image-container">
                                    <img id="compressOriginalPreview" alt="Original">
                                </div>
                                <div class="compress-info">
                                    <span id="originalSize">-</span>
                                </div>
                            </div>
                            <div class="compress-arrow">
                                <i class="fas fa-arrow-right"></i>
                            </div>
                            <div class="compress-result">
                                <h4 data-i18n="compressed">Compressed</h4>
                                <div class="compress-image-container">
                                    <img id="compressResultPreview" alt="Compressed">
                                </div>
                                <div class="compress-info">
                                    <span id="compressedSize">-</span>
                                    <span class="compress-savings" id="compressSavings"></span>
                                </div>
                            </div>
                        </div>

                        <div class="compress-controls">
                            <div class="quality-slider">
                                <div class="quality-header">
                                    <label data-i18n="quality">Quality</label>
                                    <span class="quality-value" id="qualityValue">85%</span>
                                </div>
                                <input type="range" id="qualitySlider" min="1" max="100" value="85" class="slider slider-purple">
                                <div class="quality-labels">
                                    <span data-i18n="low">Low</span>
                                    <span data-i18n="medium">Medium</span>
                                    <span data-i18n="high">High</span>
                                    <span data-i18n="best">Best</span>
                                </div>
                            </div>

                            <div class="compress-format">
                                <label data-i18n="outputFormat">Output Format</label>
                                <select id="compressFormat" class="input-field">
                                    <option value="original">Keep Original</option>
                                    <option value="image/jpeg">JPEG</option>
                                    <option value="image/png">PNG</option>
                                    <option value="image/webp">WebP</option>
                                </select>
                            </div>

                            <button class="btn btn-primary btn-full" onclick="applyCompression()">
                                <i class="fas fa-compress"></i> <span data-i18n="compressImage">Compress Image</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Export Tab -->
                <div class="tab-content" id="tab-export">
                    <div class="export-panel">
                        <div class="export-preview">
                            <h4 data-i18n="preview">Preview</h4>
                            <div class="export-image-container">
                                <img id="exportPreview" alt="Export Preview">
                            </div>
                        </div>

                        <div class="export-options">
                            <div class="export-setting">
                                <label data-i18n="filename">Filename</label>
                                <input type="text" id="exportFilename" class="input-field" placeholder="imagepro-export">
                            </div>

                            <div class="export-setting">
                                <label data-i18n="exportFormat">Format</label>
                                <select id="exportFormat" class="input-field">
                                    <option value="image/jpeg">JPEG (.jpg)</option>
                                    <option value="image/png">PNG (.png)</option>
                                    <option value="image/webp">WebP (.webp)</option>
                                </select>
                            </div>

                            <div class="export-setting">
                                <label data-i18n="exportQuality">Quality</label>
                                <div class="slider-with-value">
                                    <input type="range" id="exportQuality" min="1" max="100" value="95" class="slider slider-purple">
                                    <span class="slider-value">95%</span>
                                </div>
                            </div>

                            <div class="export-info">
                                <div class="info-row">
                                    <span data-i18n="dimensions">Dimensions:</span>
                                    <span id="exportDimensions">-</span>
                                </div>
                                <div class="info-row">
                                    <span data-i18n="estimatedSize">Estimated Size:</span>
                                    <span id="exportSize">-</span>
                                </div>
                            </div>

                            <button class="btn btn-primary btn-full btn-large" onclick="downloadFinal()">
                                <i class="fas fa-download"></i> <span data-i18n="downloadImage">Download Image</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Image Canvas Area -->
                <div class="canvas-area" id="canvasArea" style="display:none">
                    <div class="canvas-toolbar">
                        <button class="toolbar-btn" onclick="toggleCompare()" id="compareBtn">
                            <i class="fas fa-columns"></i> <span data-i18n="compare">Compare</span>
                        </button>
                        <button class="toolbar-btn" onclick="zoomImage(0.1)">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button class="toolbar-btn" onclick="zoomImage(-0.1)">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <button class="toolbar-btn" onclick="resetZoom()">
                            <i class="fas fa-expand"></i> <span data-i18n="fit">Fit</span>
                        </button>
                        <span class="zoom-level" id="zoomLevel">100%</span>
                    </div>
                    
                    <div class="canvas-container" id="canvasContainer">
                        <div class="compare-container" id="compareContainer">
                            <div class="image-wrapper original-wrapper">
                                <span class="image-label" data-i18n="before">Before</span>
                                <img id="canvasOriginal" alt="Original">
                            </div>
                            <div class="image-wrapper edited-wrapper">
                                <span class="image-label" data-i18n="after">After</span>
                                <img id="canvasEdited" alt="Edited">
                            </div>
                            <div class="compare-slider" id="compareSlider">
                                <div class="compare-handle">
                                    <i class="fas fa-arrows-alt-h"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Success!</span>
    </div>

    <!-- Progress Modal -->
    <div class="modal-overlay" id="progressModal" style="display:none">
        <div class="modal modal-progress">
            <div class="progress-header">
                <h3 data-i18n="processing">Processing...</h3>
                <p id="progressText">0 / 0 files</p>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
